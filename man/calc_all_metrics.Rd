% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/calc_all_metrics.R
\name{calc_all_metrics}
\alias{calc_all_metrics}
\title{Calculate Alpha, Beta, and Network Metrics from Community Data}
\usage{
calc_all_metrics(df)
}
\arguments{
\item{df}{A data.frame where each row represents a fig (or sampling unit)
and each column corresponds to a wasp species. Values are species abundances (counts).
Column names may include or omit the prefix "emergence_".}
}
\value{
A single-row data.frame containing the following metrics:
  \itemize{
    \item \code{mean_richness}: Mean number of species per fig
    \item \code{mean_shannon}: Mean Shannon diversity
    \item \code{mean_simpson}: Mean Simpson diversity
    \item \code{mean_evenness}: Mean Shannon evenness (Shannon/log(richness))
    \item \code{mean_bray_curtis}: Mean Bray-Curtis dissimilarity (beta diversity)
    \item \code{mean_jaccard}: Mean Jaccard dissimilarity (beta diversity, presence-absence)
    \item \code{nestedness}: Nestedness based on NODF metric (from \pkg{bipartite})
    \item \code{connectance}: Proportion of realized links in the species-fig network
    \item \code{links_per_species}: Average number of links per species (linkage density)
    \item \code{modularity}: Modularity score from community detection (\pkg{igraph})
  }
}
\description{
This function computes key community-level summary metrics from a fig wasp emergence matrix.
It includes alpha diversity indices (richness, Shannon, Simpson, evenness),
beta diversity (Bray-Curtis, Jaccard), and bipartite network structure metrics (nestedness,
connectance, linkage density, modularity).
}
\details{
Input is typically a matrix of species emergence abundances across multiple figs,
with optional "emergence_" prefixes in column names.


If the input matrix contains zero-only rows, they will be excluded from
beta diversity and network structure calculations. Alpha diversity is computed
using \pkg{vegan}, beta diversity metrics are derived from Bray-Curtis and Jaccard distances,
and network metrics are calculated using \pkg{bipartite} and \pkg{igraph}.

Column names with the "emergence_" prefix will be automatically stripped.
If fewer than two rows remain after removing zero-only rows, beta and network metrics return NA.
}
\examples{
# Simulated emergence data
set.seed(1)
df <- data.frame(
  emergence_A = sample(0:10, 100, replace = TRUE),
  emergence_B = sample(0:5, 100, replace = TRUE),
  emergence_C = sample(0:3, 100, replace = TRUE)
)
metrics <- calc_all_metrics(df)
print(metrics)

}
